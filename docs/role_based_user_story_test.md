# 役割ベースのユーザーストーリーテストシナリオ

## 概要
このドキュメントでは、パートナー要員管理システムの主要な機能に対する役割ベースのユーザーストーリーテストシナリオを定義します。特に「開発チーム」と「パートナー管理チーム」の異なる権限を持つユーザーの視点から、実際の業務フローに沿ったテストシナリオを提供します。

## ユーザーロールの定義

### 開発チーム
- **開発マネージャー**: 案件全体の管理、要員の評価承認、予算管理を担当
- **プロジェクトリーダー**: 個別案件の管理、要員の技術評価、日々の進捗管理を担当
- **開発メンバー**: 案件の詳細情報の参照、要員との日常的なコミュニケーションを担当

### パートナー管理チーム
- **パートナー管理責任者**: パートナー戦略の策定、重要契約の承認、全体的な管理を担当
- **パートナー管理担当者**: パートナー会社との日常的な連絡、契約管理、要員の手配を担当
- **コンプライアンス担当者**: 信用調査/反社チェックの実施、法的要件の確認を担当

### 管理者
- **システム管理者**: ユーザー管理、権限設定、システム設定の管理を担当

## 開発チーム視点のユーザーストーリーテストシナリオ

### シナリオ1: 新規案件の登録から要員アサインまで
**ユーザーロール**: 開発マネージャー → プロジェクトリーダー → パートナー管理担当者

**ストーリー**:
新規プロジェクトが立ち上がり、開発マネージャーが案件情報を登録し、プロジェクトリーダーが詳細を追加した後、パートナー管理担当者に要員の手配を依頼する。

**テストステップ**:
1. 開発マネージャーとしてログインする
2. ダッシュボードから「案件管理」→「新規案件登録」を選択する
3. 案件の基本情報（案件名、概要、予算、期間など）を入力し、ステータスを「下書き」として保存する
4. ログアウトし、プロジェクトリーダーとしてログインする
5. 案件一覧から該当案件を選択し、詳細画面に移動する
6. 「編集」ボタンをクリックし、技術要件、必須スキル、作業内容などの詳細情報を追加する
7. ステータスを「承認待ち」に変更して保存する
8. ログアウトし、開発マネージャーとしてログインする
9. 承認待ち案件一覧から該当案件を選択し、内容を確認する
10. 「承認」ボタンをクリックし、ステータスを「募集中」に変更する
11. 「要員募集依頼」ボタンをクリックし、パートナー管理チームへの依頼フォームを表示する
12. 依頼内容を入力し、「送信」ボタンをクリックする
13. ログアウトし、パートナー管理担当者としてログインする
14. 通知一覧から新規要員募集依頼を確認する
15. 依頼内容に基づいて案件募集プロセスを開始する

**期待結果**:
- 各ロールに応じた画面表示と操作権限が適切に制御されている
- 案件情報が正しく登録され、編集内容が保存される
- 承認フローが正しく機能し、ステータスが適切に更新される
- 要員募集依頼がパートナー管理担当者に正しく通知される
- 全体のワークフローがスムーズに進行する

### シナリオ2: 要員の技術評価と業績評価
**ユーザーロール**: プロジェクトリーダー → 開発マネージャー

**ストーリー**:
プロジェクトに参画している要員の四半期評価を行い、プロジェクトリーダーが技術評価を実施した後、開発マネージャーが確認して最終評価を決定する。

**テストステップ**:
1. プロジェクトリーダーとしてログインする
2. ダッシュボードから「要員管理」→「担当案件要員一覧」を選択する
3. 評価対象の要員を選択し、詳細画面に移動する
4. 「評価」タブを選択し、「新規評価」ボタンをクリックする
5. 評価期間、評価項目（技術力、コミュニケーション力、納期遵守など）に点数とコメントを入力する
6. 「保存して申請」ボタンをクリックし、評価を開発マネージャーに申請する
7. ログアウトし、開発マネージャーとしてログインする
8. 通知一覧から評価承認依頼を確認する
9. 該当の評価詳細を確認し、必要に応じてコメントを追加する
10. 「承認」ボタンをクリックして評価を確定する
11. 要員の評価履歴を確認し、過去の評価と比較する
12. 評価結果に基づいて、要員の次期アサイン計画を検討する

**期待結果**:
- 評価フォームが適切に表示され、各評価項目が入力できる
- 評価申請と承認のフローが正しく機能する
- 評価履歴が適切に保存され、閲覧できる
- 評価データが集計され、傾向分析ができる
- 権限に応じた操作制限が適切に機能する

### シナリオ3: 要員関連の問題報告と対応
**ユーザーロール**: 開発メンバー → プロジェクトリーダー → パートナー管理担当者

**ストーリー**:
開発メンバーが要員の勤怠問題を発見し、プロジェクトリーダーに報告。プロジェクトリーダーが状況を確認した後、パートナー管理担当者に対応を依頼する。

**テストステップ**:
1. 開発メンバーとしてログインする
2. ダッシュボードから「要員管理」→「チーム要員一覧」を選択する
3. 問題のある要員を選択し、詳細画面に移動する
4. 「連絡・依頼」タブを選択し、「新規連絡」ボタンをクリックする
5. 連絡種別「問題報告」を選択し、内容（勤怠不良の詳細）を入力する
6. 「送信」ボタンをクリックして報告を送信する
7. ログアウトし、プロジェクトリーダーとしてログインする
8. 通知一覧から問題報告を確認する
9. 報告内容を確認し、要員の勤怠記録を確認する
10. 「対応」ボタンをクリックし、パートナー管理担当者への依頼フォームを表示する
11. 依頼内容を入力し、「送信」ボタンをクリックする
12. ログアウトし、パートナー管理担当者としてログインする
13. 通知一覧から依頼を確認する
14. 依頼内容に基づいて、パートナー会社への連絡フォームを表示する
15. 連絡内容を入力し、「送信」ボタンをクリックする
16. 対応状況を「対応中」に更新する
17. 問題解決後、対応結果を入力し、状況を「完了」に更新する

**期待結果**:
- 問題報告と連絡依頼のフローが正しく機能する
- 各ロールに応じた通知と画面表示が適切に行われる
- 対応状況の追跡と更新が可能である
- 問題解決までの一連のプロセスがシステム上で管理できる
- 履歴が適切に保存され、後から参照できる

## パートナー管理チーム視点のユーザーストーリーテストシナリオ

### シナリオ1: 新規パートナー会社の登録から基本契約締結まで
**ユーザーロール**: パートナー管理担当者 → コンプライアンス担当者 → パートナー管理責任者

**ストーリー**:
新規パートナー会社との取引を開始するため、パートナー管理担当者が基本情報を登録し、コンプライアンス担当者が信用調査を実施した後、パートナー管理責任者が基本契約を承認する。

**テストステップ**:
1. パートナー管理担当者としてログインする
2. ダッシュボードから「パートナー管理」→「新規パートナー登録」を選択する
3. パートナー会社の基本情報（会社名、住所、連絡先など）を入力し、保存する
4. 「担当者」タブを選択し、「新規担当者登録」ボタンをクリックする
5. 担当者情報（氏名、役職、連絡先など）を入力し、保存する
6. 「信用調査依頼」ボタンをクリックし、コンプライアンス担当者への依頼フォームを表示する
7. 依頼内容を入力し、「送信」ボタンをクリックする
8. ログアウトし、コンプライアンス担当者としてログインする
9. 通知一覧から信用調査依頼を確認する
10. 該当のパートナー会社詳細画面に移動する
11. 「信用調査/反社チェック」タブを選択し、「新規チェック登録」ボタンをクリックする
12. チェック結果情報を入力し、関連書類をアップロードする
13. 「保存」ボタンをクリックしてチェック結果を登録する
14. 「調査完了通知」ボタンをクリックし、パートナー管理担当者に通知する
15. ログアウトし、パートナー管理担当者としてログインする
16. 通知一覧から調査完了通知を確認する
17. パートナー会社詳細画面に移動し、チェック結果を確認する
18. 「基本契約」タブを選択し、「新規契約登録」ボタンをクリックする
19. 契約情報を入力し、契約書ファイルをアップロードする
20. 「保存して申請」ボタンをクリックし、パートナー管理責任者に承認を依頼する
21. ログアウトし、パートナー管理責任者としてログインする
22. 通知一覧から契約承認依頼を確認する
23. 契約内容を確認し、「承認」ボタンをクリックする

**期待結果**:
- パートナー会社情報が正しく登録され、編集できる
- 信用調査依頼と結果登録のフローが正しく機能する
- 契約情報の登録と承認フローが適切に動作する
- 各ステップでの通知が適切に送信される
- 権限に応じた操作制限が適切に機能する
- 全体のワークフローがスムーズに進行する

### シナリオ2: 案件募集情報の送信と応募管理
**ユーザーロール**: パートナー管理担当者 → パートナー管理責任者

**ストーリー**:
開発チームから依頼された案件について、パートナー管理担当者が複数のパートナー会社に募集情報を送信し、応募状況を管理する。

**テストステップ**:
1. パートナー管理担当者としてログインする
2. 通知一覧から要員募集依頼を確認する
3. 「案件募集」→「新規募集作成」を選択する
4. 募集対象の案件を選択する
5. 送信先のパートナー会社を複数選択する
6. メールテンプレートを選択し、内容を必要に応じて編集する
7. 「プレビュー」ボタンをクリックし、送信内容を確認する
8. 「送信」ボタンをクリックし、募集情報を送信する
9. 「募集管理」画面で送信履歴を確認する
10. パートナー会社からの応募情報（メール、電話など）を「応募登録」機能で登録する
11. 応募要員の情報を入力し、提案資料をアップロードする
12. 「保存」ボタンをクリックして応募情報を登録する
13. 複数の応募情報を比較検討し、候補者を選定する
14. 選定結果を「選考結果登録」機能で登録する
15. 選考結果をパートナー会社に通知する
16. ログアウトし、パートナー管理責任者としてログインする
17. 「案件募集状況」レポートで全体の応募状況を確認する

**期待結果**:
- 案件募集メールが正しく作成され、送信できる
- 送信履歴が適切に記録される
- 応募情報が正しく登録され、管理できる
- 選考プロセスがシステム上で追跡できる
- 応募状況のレポートが適切に表示される
- 権限に応じた操作制限が適切に機能する

### シナリオ3: 個別契約の締結と更新
**ユーザーロール**: パートナー管理担当者 → パートナー管理責任者 → 開発マネージャー

**ストーリー**:
選定された要員について、パートナー管理担当者が個別契約を作成し、パートナー管理責任者の承認後、開発マネージャーに通知する。契約期間満了前に更新手続きを行う。

**テストステップ**:
1. パートナー管理担当者としてログインする
2. 「要員管理」→「要員一覧」から該当の要員を選択する
3. 「契約」タブを選択し、「新規契約登録」ボタンをクリックする
4. 契約情報（案件、期間、単価など）を入力し、契約書ファイルをアップロードする
5. 「保存して申請」ボタンをクリックし、パートナー管理責任者に承認を依頼する
6. ログアウトし、パートナー管理責任者としてログインする
7. 通知一覧から契約承認依頼を確認する
8. 契約内容を確認し、「承認」ボタンをクリックする
9. 「開発チームへ通知」ボタンをクリックし、開発マネージャーに通知する
10. ログアウトし、開発マネージャーとしてログインする
11. 通知一覧から契約締結通知を確認する
12. 要員の詳細情報と契約内容を確認する
13. ログアウトし、パートナー管理担当者としてログインする
14. ダッシュボードで契約期間が近づいている要員を確認する
15. 該当の要員を選択し、「契約」タブで現在の契約を確認する
16. 「契約更新」ボタンをクリックし、更新情報を入力する
17. 「保存して申請」ボタンをクリックし、承認フローを開始する

**期待結果**:
- 個別契約情報が正しく登録され、承認フローが機能する
- 契約書ファイルが適切に管理される
- 契約情報が関係者に適切に通知される
- 契約期限アラートが適切に表示される
- 契約更新プロセスがスムーズに実行できる
- 権限に応じた操作制限が適切に機能する

## 管理者視点のユーザーストーリーテストシナリオ

### シナリオ1: ユーザーアカウント管理と権限設定
**ユーザーロール**: システム管理者

**ストーリー**:
新入社員の入社に伴い、システム管理者が新規ユーザーアカウントを作成し、適切な権限を設定する。また、部署異動があった社員のロールを変更する。

**テストステップ**:
1. システム管理者としてログインする
2. 「システム管理」→「ユーザー管理」を選択する
3. 「新規ユーザー登録」ボタンをクリックする
4. ユーザー情報（氏名、メールアドレス、所属部署など）を入力する
5. 初期パスワードを設定し、「ユーザーに通知」オプションを選択する
6. 適切なロール（開発メンバー）を選択する
7. 「保存」ボタンをクリックしてユーザーを登録する
8. ユーザー一覧から異動対象のユーザーを検索する
9. ユーザーを選択し、「編集」ボタンをクリックする
10. 所属部署を更新し、ロールをパートナー管理担当者に変更する
11. 「保存」ボタンをクリックして変更を適用する
12. ログアウトし、新規作成したユーザーアカウントでログインする
13. 開発メンバーの権限で適切な機能にアクセスできることを確認する
14. ログアウトし、ロールを変更したユーザーアカウントでログインする
15. パートナー管理担当者の権限で適切な機能にアクセスできることを確認する

**期待結果**:
- ユーザーアカウントが正しく作成され、初期パスワード通知が機能する
- ユーザー情報の編集とロール変更が適切に反映される
- 各ロールに応じた機能アクセス制限が正しく機能する
- ユーザー管理画面で適切な検索・フィルタリングができる
- ユーザーアカウントの無効化と再有効化が機能する

### シナリオ2: システム設定とマスターデータ管理
**ユーザーロール**: システム管理者

**ストーリー**:
システム管理者が、新しいスキルカテゴリを追加し、通知設定を変更する。また、システムログを確認して異常がないか監視する。

**テストステップ**:
1. システム管理者としてログインする
2. 「システム管理」→「マスターデータ管理」を選択する
3. 「スキルカテゴリ」を選択し、「新規追加」ボタンをクリックする
4. 新しいスキルカテゴリ情報を入力し、「保存」ボタンをクリックする
5. 「スキル」を選択し、「新規追加」ボタンをクリックする
6. 新しいスキル情報を入力し、先ほど作成したカテゴリを選択する
7. 「保存」ボタンをクリックしてスキルを登録する
8. 「システム管理」→「システム設定」を選択する
9. 「通知設定」タブを選択し、通知頻度や方法を変更する
10. 「保存」ボタンをクリックして設定を更新する
11. 「システム管理」→「システムログ」を選択する
12. ログの検索条件を設定し、「検索」ボタンをクリックする
13. ログ一覧を確認し、エラーや警告がないか確認する
14. 特定のログエントリを選択し、詳細を確認する

**期待結果**:
- マスターデータが正しく追加・編集できる
- システム設定が適切に更新され、反映される
- システムログが適切に記録され、検索・閲覧できる
- 各管理機能が適切に動作し、システム全体の管理ができる
- 権限のないユーザーはこれらの機能にアクセスできない

## クロスロール業務フローテストシナリオ

### シナリオ1: 案件のライフサイクル全体管理
**ユーザーロール**: 開発マネージャー → プロジェクトリーダー → パートナー管理担当者 → コンプライアンス担当者 → パートナー管理責任者 → 開発メンバー

**ストーリー**:
新規案件の立ち上げから要員の選定、契約締結、プロジェクト実施、評価までの一連のライフサイクルを管理する。

**テストステップ**:
1. 開発マネージャーが新規案件を登録する
2. プロジェクトリーダーが案件詳細を追加し、承認申請する
3. 開発マネージャーが案件を承認し、要員募集を依頼する
4. パートナー管理担当者が案件募集情報をパートナー会社に送信する
5. パートナー管理担当者が応募情報を登録し、候補者を選定する
6. コンプライアンス担当者が候補者の所属会社の信用調査状況を確認する
7. パートナー管理担当者が個別契約を作成し、承認申請する
8. パートナー管理責任者が契約を承認する
9. 開発マネージャーが契約締結を確認し、プロジェクトに要員をアサインする
10. プロジェクトリーダーが要員の作業を管理し、進捗を記録する
11. 開発メンバーが日々の作業状況を記録する
12. プロジェクト終了時、プロジェクトリーダーが要員評価を実施する
13. 開発マネージャーが評価を承認する
14. パートナー管理担当者が契約終了処理を行う

**期待結果**:
- 複数ロールにまたがる一連の業務フローがスムーズに実行できる
- 各ステップでの情報が適切に引き継がれる
- 各ロールに応じた権限制御が適切に機能する
- 全体のプロセスが追跡可能で、現在の状況が把握できる
- 各ステップでの通知が適切に機能する

### シナリオ2: 問題発生時の対応フロー
**ユーザーロール**: 開発メンバー → プロジェクトリーダー → パートナー管理担当者 → パートナー管理責任者 → 開発マネージャー

**ストーリー**:
プロジェクト進行中に要員のパフォーマンス問題が発生し、対応から解決までのプロセスを管理する。

**テストステップ**:
1. 開発メンバーが問題を報告する
2. プロジェクトリーダーが状況を確認し、パートナー管理担当者に対応を依頼する
3. パートナー管理担当者がパートナー会社に連絡し、状況を記録する
4. パートナー管理担当者が対応策を提案し、パートナー管理責任者に報告する
5. パートナー管理責任者が重大な問題と判断し、開発マネージャーに報告する
6. 開発マネージャーが対応策を承認する
7. パートナー管理担当者が対応策を実行し、進捗を記録する
8. プロジェクトリーダーが状況改善を確認し、完了報告を行う
9. 開発マネージャーが最終的な対応結果を確認し、案件記録に残す

**期待結果**:
- 問題報告から解決までのフローがスムーズに実行できる
- 各ロール間での情報共有と連携が適切に行われる
- 対応状況の追跡と記録が適切に管理される
- 権限に応じた操作制限が適切に機能する
- 全体のプロセスが透明で、監査可能である

## 画面間整合性チェックポイント

各ユーザーストーリーテストシナリオを実施する際に、以下の画面間整合性のチェックポイントに特に注意して確認します：

### 1. ナビゲーションの一貫性
- メニュー構造が全画面で一貫しているか
- 現在位置（パンくずリスト等）が適切に表示されているか
- 戻るボタンなどの操作が期待通りに機能するか
- ロールに応じたメニュー項目の表示/非表示が適切か

### 2. データの整合性
- ある画面で登録・更新したデータが他の関連画面で正しく反映されるか
- ダッシュボードの集計情報が各詳細画面の情報と一致するか
- リスト表示と詳細表示で情報に矛盾がないか
- 異なるロールでログインした場合でも、データの一貫性が保たれるか

### 3. デザインの一貫性
- フォント、色、ボタンスタイルなどのUIが統一されているか
- フォームの入力規則やバリデーションメッセージが一貫しているか
- レスポンシブデザインが全画面で適切に機能するか
- エラーメッセージの表示方法が統一されているか

### 4. ユーザーフローの自然さ
- 関連する操作間の画面遷移が論理的で自然か
- 複数ステップの操作で途中経過が適切に保存されるか
- エラー発生時の回復パスが明確で使いやすいか
- 頻繁に行う操作へのショートカットが適切に提供されているか

### 5. 権限に応じた表示制御
- 各ユーザーロールに応じて適切な機能やデータが表示/非表示になっているか
- 権限のない操作がUIレベルで適切に制限されているか
- 共有データへのアクセス制御が適切に機能するか
- 権限変更後に適切に画面表示が変わるか

## テスト実施時の注意点

1. **ロール切り替えの徹底**: 各シナリオでは、指定されたロールで確実にログイン/ログアウトを行い、権限の違いを明確に検証する

2. **業務フローの連続性**: 実際の業務フローに沿ってテストを行い、途中で中断せずに一連の流れを検証する

3. **データの関連性確認**: 前のステップで作成したデータが次のステップで適切に利用できることを確認する

4. **通知機能の検証**: 各ステップでの通知が適切なタイミングで、適切なユーザーに送信されることを確認する

5. **エラーケースの検証**: 正常系だけでなく、入力ミスや権限エラーなどの異常系も検証する

6. **レスポンス時間の確認**: 各操作のレスポンス時間が許容範囲内であることを確認する

7. **ブラウザ互換性の確認**: 複数のブラウザで同じ操作が正しく機能することを確認する
